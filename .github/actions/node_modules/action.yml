name: 'node_modules'
description: 'Ensures that node_modules is installed'
runs:
  using: "composite"
  steps:
    - name: Hash package-lock.json
      run: echo "cache_key=node_modules_$(shasum -a 256 react/package-lock.json | cut -d ' ' -f 1)" >> $GITHUB_OUTPUT
      shell: bash
      id: hash

    - name: Cache node_modules
      id: cache-node_modules
      uses: actions/cache@v4
      with:
        path: react/node_modules
        key: ${{ steps.hash.outputs.cache_key }}
    
    - name: Install node modules
      run: npm ci
      shell: bash
      working-directory: react
      if: steps.cache-node_modules.outputs.cache-hit != 'true'