<html>

<head>
    <title>Density Database</title>
    <link rel="icon" type="image/png" href="/thumbnail.png">
    <script type='module'>
        import { loadJSON } from '/scripts/load_json.js';

        let values = loadJSON("/index/pages.json");
        let populations = loadJSON("/index/population.json");
        var totalWeight = populations.reduce(function (sum, x) {
            return sum + x;
        }, 0);

        // Generate a random number between 0 and the total weight
        var randomValue = Math.random() * totalWeight;

        // Find the destination based on the random value
        var x = null;
        var cumulativeWeight = 0;

        for (var i = 0; i < values.length; i++) {
            cumulativeWeight += populations[i];

            if (randomValue < cumulativeWeight) {
                x = values[i];
                break;
            }
        }

        document.location = "/article.html?longname=" + x;
    </script>
</head>

</html>