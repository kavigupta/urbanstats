import createClient from 'openapi-fetch'

import { AuthenticationStateMachine } from '../quiz/AuthenticationStateMachine'

import type { paths } from './urbanstats-persistent-data' // generated by openapi-typescript

export const client = createClient<paths>({ baseUrl: 'http://localhost:54579', async fetch(input) {
    const response = await globalThis.fetch(input)
    if (response.status === 401) {
        AuthenticationStateMachine.shared.authenticationError()
    }
    return response
} })
